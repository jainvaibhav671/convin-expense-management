

# Back end Intern Assignment

## Table of Contents

* [Introduction](#introduction)
* [Deployment](#deployment)
* [Setup Instructions](#setup-instructions)
	+ [Docker Setup](#docker-setup)
	+ [Client Setup](#client-setup)
	+ [Server Setup](#server-setup)
* [Assignment Goals](#assignment-goals)
	+ [Completed Requirements](#requirements)
	+ [Deliverables](#deliverables)

## Introduction

This project is a full-stack application that consists of a client-side frontend built with `React `and `React Router`, and a server-side backend built with `Express` and `MongoDB`.

The application allows users to manage expenses and participants, and provides a simple and intuitive interface for users to interact with.

The project is hosted on [Fly.io](https://www.fly.io)

## Deployment

The project is hosted on [Fly.io](https://www.fly.io)

Frontend URL: [https://convin.fly.dev](https://convin.fly.dev)
Backend URL: [https://convin-api.fly.dev](https://convin-api.fly.dev)

You can access the frontend and backend by using the URLs above.
> The backend will reject any requests that are not coming from the frontend.

## Setup Instructions

### Docker Setup

You can directly start it using docker compose

- Fill the environment variables in the `.env` file in client and server folder
- Run `docker-compose up -d` in the root directory
- Open the browser and navigate to `http://localhost:5173`

### Client Setup

#### Step 1: Install Dependencies

To start, navigate to the `client` directory and run the following command in your terminal:

```bash
cd client
pnpm install
```

This will install all the dependencies listed in the `package.json` file.

#### Step 2: Set up Environment Variables

Create a new file named `.env` in the `client` directory and add the following environment variable:

```makefile
VITE_API_URL=http://localhost:5000
```

This will set the API URL for the client to connect to the server.

#### Step 3: Start the Client

To start the client, run the following command in your terminal:

```bash
pnpm run dev
```

This will start the client on [http://localhost:5173](http://localhost:5173).

### Server Setup

#### Step 1: Install Dependencies

To start, navigate to the `server` directory and run the following command in your terminal:

```bash
cd server
pnpm install
```

This will install all the dependencies listed in the `package.json` file.

#### Step 2: Set up Environment Variables

Create a new file named `.env` in the `server` directory and add the following environment variables:

```makefile
MONGODB_URI=mongodb://localhost:27017/
CORS_ORIGIN=http://localhost:3000
PORT=5000
JWT_SECRET=your_secret_key
MONGODB_NAME=your_database_name
CLUSTER_NAME=your_cluster_name
```

Replace the empty values with your own MongoDB URI, CORS origin, port, JWT secret, MongoDB name, and cluster name.

> Remove the URL params from the mongodb database along with **Cluster Name** as these are specified in the `src/lib/connectDB.ts` file.

#### Step 3: Set up MongoDB

Create a Cluster on MongoDB and paste the URI connection string in the .env

> The database and collections will be automatically generated by the backend server

#### Step 4: Start the Server

To start the server, run the following command in your terminal:

```bash
pnpm dev
```

This will start the server on [http://localhost:5000](http://localhost:5000).

## Verify the Setup

Open your web browser and navigate to [http://localhost:5173](http://localhost:5173).

You should see the client application running. Verify that you can interact with the application and that it is connecting to the server correctly.

## Assignment Goals

### Requirements

- [x] User Management
    - Name
    - Email
    - Phone no
- [x] Expense management
- [x] Expenses can be split using three methods
    - EQUAL
    - EXACT
    - PERCENT
- [x] Balance Sheet
    - Show individual expenses.
    - Show overall expenses for all users.
    - Feature to download the balance sheet.
- [x] Participant management (create, read, delete)
- [x] Integration with MongoDB database

### Deliverables

- [x] Backend Service
- [x] API Endpoints
    - [x] User Endpoints
        - Create user
        - Retrieve user details
    - [x] Expense Endpoints
        - Add Expense
        - Retrive Individual User expenses
        - Retrieve overall expenses
        - Download balance sheet
- [x] Data Validation
    - Validate user inputs
    - Ensure percentages add upto 100%

- [x] Implement User Authentication
- [x] Include error handling and input validation
